#include <iostream>
using namespace std;

int main()
{
	int num, n = 1, i = 0, j = 1;
	cout << "Please enter the length of square side : ";
	cin >> num;
	if (num < 3 || num>15)//범위 밖의 입력시 종료
	{
		cout << "Wrong number" << endl;
		return 0;
	}
	int **arr = new int*[num];//이차원 동적할당
	for (int i = 0; i < num; i++)
	{
		arr[i] = new int[num];
		memset(arr[i], 0, num*sizeof(int));//모든 칸을 0으로 초기화
	}
	arr[0][0] = n;//시작점
	while (n != num*num)
	{
		arr[i][j] = ++n;
		if (arr[i][j - 1] == n - 1)//오른쪽으로 이동
		{
			j++;
			if (j == num || arr[i][j] != 0)//막히면
				i++, j--;
		}
		else if (arr[i - 1][j] == n - 1)//아래로 이동
		{
			i++;
			if (i == num || arr[i][j] != 0)//막히면
				i--, j--;
		}
		else if (arr[i][j + 1] == n - 1)//왼쪽으로 이동
		{
			j--;
			if (j == -1 || arr[i][j] != 0)//막히면
				i--, j++;
		} 
		else if (arr[i + 1][j] == n - 1)//위로 이동
		{
			i--;
			if (arr[i][j] != 0)//막히면
				i++, j++;
		}
	}
	for (i = 0; i < num; i++)
	{
		for (j = 0; j < num; j++)//출력
			cout << arr[i][j] << '\t';
		cout << endl << endl;
	}
	for (i = 0; i < num; i++)//할당해제
		delete[]arr[i];
	delete[]arr;
	return 0;
}
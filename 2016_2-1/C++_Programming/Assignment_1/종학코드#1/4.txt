#include <iostream>
#include <fstream>
#include <ctime>//랜덤함수 시드값 time함수를 위해
using namespace std;

int main()
{
	int num, h[2][2], len, cnt=0;
	char data[11][100], q;//단어개수 11개
	ifstream fin;
	fin.open("words.txt");

	if (!fin)//파일오픈 실패
	{
		cout << "파일을 읽을 수 없습니다." << endl;
		return -1;
	}

	for (int i = 0; !fin.eof(); i++)//파일에서 단어 받아오기
	{
		fin.getline(data[i], 100);
	}
	srand(time(NULL));
	num = rand() % 11;//단어뽑기
	len = strlen(data[num]);
	while (1)//랜덤글자뽑기
	{
		h[0][0] = rand() % len;
		h[1][0] = rand() % len;
		if (h[0][0] != h[1][0])break;
	}
	for (int i = 0; i < 2; i++)//뽑은 글자 숨기기
	{
		h[i][1] = data[num][h[i][0]];
		data[num][h[i][0]] = '_';
	}
	cout << "== Start ==" << endl;
	for (int i = 0; i < 4; i++)//시작
	{
		cout << data[num] << endl << ">>";
		cin >> q;
		for (int j = 0; j < 2; j++)//입력된 글자와 숨긴 글자 검사
		{
			if (q == h[j][1])
			{
				data[num][h[j][0]] = q;
				cnt++;
				if (h[0][1] == h[1][1] && cnt == 2)//숨긴 두 글자가 같을때 각각 나눠넣기
					data[num][h[1][0]] = q;
				break;
			}
		}
		if (cnt == 2)
			break;
	}
	cout << data[num] << endl;
	if (cnt!=2)//4번의 기회에서 실패시
	{
		cout << "Fail; disrupt" << endl;
	}
	cout << "== End ==" << endl;
	fin.close();
	return 0;
}